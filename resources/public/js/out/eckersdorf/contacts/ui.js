// Compiled by ClojureScript 1.9.946 {}
goog.provide('eckersdorf.contacts.ui');
goog.require('cljs.core');
goog.require('cljs.spec.alpha');
goog.require('reagent.core');
goog.require('reagent.ratom');
goog.require('re_frame.core');
goog.require('antizer.reagent');
goog.require('cuerdas.core');
goog.require('eckersdorf.flex');
goog.require('eckersdorf.utils');
goog.require('clojure.set');
goog.require('cljsjs.moment.locale.pl');
goog.require('cljs_time.coerce');
eckersdorf.contacts.ui.contact_dialog = (function eckersdorf$contacts$ui$contact_dialog(){
var show_dialog_QMARK_ = re_frame.core.subscribe.call(null,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword("contacts","show-dialog?","contacts/show-dialog?",679689273)], null));
var contact_form = re_frame.core.subscribe.call(null,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword("contacts","contact-form","contacts/contact-form",1454622784)], null));
var valid_contact = reagent.core.atom.call(null,null);
return ((function (show_dialog_QMARK_,contact_form,valid_contact){
return (function (){
return new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [antizer.reagent.modal,new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"visible","visible",-1024216805),!((cljs.core.deref.call(null,show_dialog_QMARK_) == null)),new cljs.core.Keyword(null,"title","title",636505583),(cljs.core.truth_(new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"modify","modify",-1261040869),null], null), null).call(null,cljs.core.deref.call(null,show_dialog_QMARK_)))?"edytuj kontakt":"dodaj kontakt"),new cljs.core.Keyword(null,"footer","footer",1606445390),reagent.core.as_element.call(null,new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div","div",1057191632),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [antizer.reagent.button,new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"on-click","on-click",1632826543),((function (show_dialog_QMARK_,contact_form,valid_contact){
return (function (){
return re_frame.core.dispatch.call(null,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword("contacts","hide-dialog","contacts/hide-dialog",-462065380)], null));
});})(show_dialog_QMARK_,contact_form,valid_contact))
], null),"anuluj"], null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [antizer.reagent.button,new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"type","type",1174270348),(cljs.core.truth_(cljs.spec.alpha.valid_QMARK_.call(null,new cljs.core.Keyword("contact","contact","contact/contact",-1685640420),cljs.core.deref.call(null,contact_form)))?new cljs.core.Keyword(null,"primary","primary",817773892):new cljs.core.Keyword(null,"danger","danger",-624338030)),new cljs.core.Keyword(null,"on-click","on-click",1632826543),((function (show_dialog_QMARK_,contact_form,valid_contact){
return (function (){
if(cljs.core.truth_(cljs.spec.alpha.valid_QMARK_.call(null,new cljs.core.Keyword("contact","contact","contact/contact",-1685640420),cljs.core.deref.call(null,contact_form)))){
if(cljs.core.truth_(new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"modify","modify",-1261040869),null], null), null).call(null,cljs.core.deref.call(null,show_dialog_QMARK_)))){
return re_frame.core.dispatch.call(null,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword("contacts","ajax.modify-contact","contacts/ajax.modify-contact",801381536)], null));
} else {
return re_frame.core.dispatch.call(null,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword("contacts","ajax.create-contact","contacts/ajax.create-contact",-1260559406)], null));
}
} else {
return antizer.reagent.message_warning.call(null,"wprowadzono b\u0142\u0119dne dane");
}
});})(show_dialog_QMARK_,contact_form,valid_contact))
], null),(cljs.core.truth_(new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"modify","modify",-1261040869),null], null), null).call(null,cljs.core.deref.call(null,show_dialog_QMARK_)))?"modyfikuj":"dodaj")], null)], null))], null),new cljs.core.PersistentVector(null, 5, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div","div",1057191632),(function (){var map__53993 = cljs.core.deref.call(null,contact_form);
var map__53993__$1 = ((((!((map__53993 == null)))?((((map__53993.cljs$lang$protocol_mask$partition0$ & (64))) || ((cljs.core.PROTOCOL_SENTINEL === map__53993.cljs$core$ISeq$)))?true:false):false))?cljs.core.apply.call(null,cljs.core.hash_map,map__53993):map__53993);
var first_name = cljs.core.get.call(null,map__53993__$1,new cljs.core.Keyword("contact","first-name","contact/first-name",-365071315));
var last_name = cljs.core.get.call(null,map__53993__$1,new cljs.core.Keyword("contact","last-name","contact/last-name",-1539952766));
return new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [antizer.reagent.row,new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"gutter","gutter",1047805662),(8)], null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [antizer.reagent.col,new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"span","span",1394872991),(12)], null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [antizer.reagent.form_item,new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"validate-status","validate-status",-612956038),(((!((first_name == null))) && (cljs.core.not.call(null,cljs.spec.alpha.valid_QMARK_.call(null,new cljs.core.Keyword("contact","first-name","contact/first-name",-365071315),first_name))))?new cljs.core.Keyword(null,"error","error",-978969032):null),new cljs.core.Keyword(null,"help","help",-439233446),(((!((first_name == null))) && (cljs.core.not.call(null,cljs.spec.alpha.valid_QMARK_.call(null,new cljs.core.Keyword("contact","first-name","contact/first-name",-365071315),first_name))))?"pole nie mo\u017Ce by\u0107 puste":null)], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [antizer.reagent.input,new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"placeholder","placeholder",-104873083),"imi\u0119",new cljs.core.Keyword(null,"value","value",305978217),first_name,new cljs.core.Keyword(null,"on-change","on-change",-732046149),((function (map__53993,map__53993__$1,first_name,last_name,show_dialog_QMARK_,contact_form,valid_contact){
return (function (e){
var val = cuerdas.core.lower.call(null,e.target.value);
var contact = cljs.core.assoc.call(null,cljs.core.deref.call(null,contact_form),new cljs.core.Keyword("contact","first-name","contact/first-name",-365071315),val);
return re_frame.core.dispatch.call(null,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword("contacts","set-contact-form","contacts/set-contact-form",690565228),contact], null));
});})(map__53993,map__53993__$1,first_name,last_name,show_dialog_QMARK_,contact_form,valid_contact))
], null)], null)], null)], null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [antizer.reagent.col,new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"span","span",1394872991),(12)], null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [antizer.reagent.form_item,new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"validate-status","validate-status",-612956038),(((!((last_name == null))) && (cljs.core.not.call(null,cljs.spec.alpha.valid_QMARK_.call(null,new cljs.core.Keyword("contact","last-name","contact/last-name",-1539952766),last_name))))?new cljs.core.Keyword(null,"error","error",-978969032):null),new cljs.core.Keyword(null,"help","help",-439233446),(((!((last_name == null))) && (cljs.core.not.call(null,cljs.spec.alpha.valid_QMARK_.call(null,new cljs.core.Keyword("contact","last-name","contact/last-name",-1539952766),last_name))))?"pole nie mo\u017Ce by\u0107 puste":null)], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [antizer.reagent.input,new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"placeholder","placeholder",-104873083),"nazwisko",new cljs.core.Keyword(null,"value","value",305978217),last_name,new cljs.core.Keyword(null,"on-change","on-change",-732046149),((function (map__53993,map__53993__$1,first_name,last_name,show_dialog_QMARK_,contact_form,valid_contact){
return (function (e){
var val = cuerdas.core.lower.call(null,e.target.value);
var contact = cljs.core.assoc.call(null,cljs.core.deref.call(null,contact_form),new cljs.core.Keyword("contact","last-name","contact/last-name",-1539952766),val);
return re_frame.core.dispatch.call(null,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword("contacts","set-contact-form","contacts/set-contact-form",690565228),contact], null));
});})(map__53993,map__53993__$1,first_name,last_name,show_dialog_QMARK_,contact_form,valid_contact))
], null)], null)], null)], null)], null);
})(),new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [antizer.reagent.row,new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"gutter","gutter",1047805662),(8)], null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [antizer.reagent.col,new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"span","span",1394872991),(12)], null),(function (){var map__53995 = cljs.core.deref.call(null,contact_form);
var map__53995__$1 = ((((!((map__53995 == null)))?((((map__53995.cljs$lang$protocol_mask$partition0$ & (64))) || ((cljs.core.PROTOCOL_SENTINEL === map__53995.cljs$core$ISeq$)))?true:false):false))?cljs.core.apply.call(null,cljs.core.hash_map,map__53995):map__53995);
var email_address = cljs.core.get.call(null,map__53995__$1,new cljs.core.Keyword("contact","email-address","contact/email-address",-1363984584));
return new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [antizer.reagent.form_item,new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"validate-status","validate-status",-612956038),(((!((email_address == null))) && (cljs.core.not.call(null,cljs.spec.alpha.valid_QMARK_.call(null,new cljs.core.Keyword("contact","email-address","contact/email-address",-1363984584),email_address))))?new cljs.core.Keyword(null,"error","error",-978969032):null),new cljs.core.Keyword(null,"help","help",-439233446),(((!((email_address == null))) && (cljs.core.not.call(null,cljs.spec.alpha.valid_QMARK_.call(null,new cljs.core.Keyword("workplace","email-address","workplace/email-address",-2014908542),email_address))))?"b\u0142\u0119dny adres email":null)], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [antizer.reagent.input,new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"placeholder","placeholder",-104873083),"e-mail",new cljs.core.Keyword(null,"value","value",305978217),email_address,new cljs.core.Keyword(null,"on-change","on-change",-732046149),((function (map__53995,map__53995__$1,email_address,show_dialog_QMARK_,contact_form,valid_contact){
return (function (e){
var val = cljs.core.not_empty.call(null,e.target.value);
var contact = cljs.core.assoc.call(null,cljs.core.deref.call(null,contact_form),new cljs.core.Keyword("contact","email-address","contact/email-address",-1363984584),((cljs.core.not.call(null,cuerdas.core.empty_or_nil_QMARK_.call(null,val)))?val:""));
return re_frame.core.dispatch.call(null,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword("contacts","set-contact-form","contacts/set-contact-form",690565228),contact], null));
});})(map__53995,map__53995__$1,email_address,show_dialog_QMARK_,contact_form,valid_contact))
], null)], null)], null);
})()], null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [antizer.reagent.col,new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"span","span",1394872991),(12)], null),(function (){var map__53997 = cljs.core.deref.call(null,contact_form);
var map__53997__$1 = ((((!((map__53997 == null)))?((((map__53997.cljs$lang$protocol_mask$partition0$ & (64))) || ((cljs.core.PROTOCOL_SENTINEL === map__53997.cljs$core$ISeq$)))?true:false):false))?cljs.core.apply.call(null,cljs.core.hash_map,map__53997):map__53997);
var phone_number = cljs.core.get.call(null,map__53997__$1,new cljs.core.Keyword("contact","phone-number","contact/phone-number",-766137276));
return new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [antizer.reagent.form_item,new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"wrapper-col","wrapper-col",-1413688923),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"span","span",1394872991),(24)], null),new cljs.core.Keyword(null,"validate-status","validate-status",-612956038),((cljs.core.not.call(null,cljs.spec.alpha.valid_QMARK_.call(null,new cljs.core.Keyword("contact","phone-number","contact/phone-number",-766137276),phone_number)))?new cljs.core.Keyword(null,"error","error",-978969032):null),new cljs.core.Keyword(null,"help","help",-439233446),(((!((phone_number == null))) && (cljs.core.not.call(null,cljs.spec.alpha.valid_QMARK_.call(null,new cljs.core.Keyword("contact","phone-number","contact/phone-number",-766137276),phone_number))))?"b\u0142\u0119dny numer telefonu":null)], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [antizer.reagent.input,new cljs.core.PersistentArrayMap(null, 5, [new cljs.core.Keyword(null,"placeholder","placeholder",-104873083),"numer telefonu",new cljs.core.Keyword(null,"value","value",305978217),phone_number,new cljs.core.Keyword(null,"addon-before","addon-before",-500360384),"+48",new cljs.core.Keyword(null,"on-change","on-change",-732046149),((function (map__53997,map__53997__$1,phone_number,show_dialog_QMARK_,contact_form,valid_contact){
return (function (e){
var val = cljs.core.not_empty.call(null,e.target.value);
var contact = cljs.core.assoc.call(null,cljs.core.deref.call(null,contact_form),new cljs.core.Keyword("contact","phone-number","contact/phone-number",-766137276),val);
return re_frame.core.dispatch.call(null,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword("contacts","set-contact-form","contacts/set-contact-form",690565228),contact], null));
});})(map__53997,map__53997__$1,phone_number,show_dialog_QMARK_,contact_form,valid_contact))
,new cljs.core.Keyword(null,"style","style",-496642736),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"display","display",242065432),new cljs.core.Keyword(null,"inline","inline",1399884222)], null)], null)], null)], null);
})()], null)], null),new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [antizer.reagent.row,new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"gutter","gutter",1047805662),(8)], null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [antizer.reagent.col,new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"span","span",1394872991),(12)], null),(function (){var map__53999 = cljs.core.deref.call(null,contact_form);
var map__53999__$1 = ((((!((map__53999 == null)))?((((map__53999.cljs$lang$protocol_mask$partition0$ & (64))) || ((cljs.core.PROTOCOL_SENTINEL === map__53999.cljs$core$ISeq$)))?true:false):false))?cljs.core.apply.call(null,cljs.core.hash_map,map__53999):map__53999);
var company = cljs.core.get.call(null,map__53999__$1,new cljs.core.Keyword("contact","company","contact/company",1357719325));
return new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [antizer.reagent.form_item,new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"validate-status","validate-status",-612956038),(((!((company == null))) && (cljs.core.not.call(null,cljs.spec.alpha.valid_QMARK_.call(null,new cljs.core.Keyword("contact","company","contact/company",1357719325),company))))?new cljs.core.Keyword(null,"error","error",-978969032):null),new cljs.core.Keyword(null,"help","help",-439233446),(((!((company == null))) && (cljs.core.not.call(null,cljs.spec.alpha.valid_QMARK_.call(null,new cljs.core.Keyword("contact","company","contact/company",1357719325),company))))?"b\u0142\u0119dna nazwa firmy":null)], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [antizer.reagent.input,new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"placeholder","placeholder",-104873083),"firma",new cljs.core.Keyword(null,"value","value",305978217),company,new cljs.core.Keyword(null,"on-change","on-change",-732046149),((function (map__53999,map__53999__$1,company,show_dialog_QMARK_,contact_form,valid_contact){
return (function (e){
var val = cljs.core.not_empty.call(null,e.target.value);
var contact = cljs.core.assoc.call(null,cljs.core.deref.call(null,contact_form),new cljs.core.Keyword("contact","company","contact/company",1357719325),((cljs.core.not.call(null,cuerdas.core.empty_or_nil_QMARK_.call(null,val)))?val:""));
return re_frame.core.dispatch.call(null,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword("contacts","set-contact-form","contacts/set-contact-form",690565228),contact], null));
});})(map__53999,map__53999__$1,company,show_dialog_QMARK_,contact_form,valid_contact))
], null)], null)], null);
})()], null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [antizer.reagent.col,new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"span","span",1394872991),(12)], null),(function (){var map__54001 = cljs.core.deref.call(null,contact_form);
var map__54001__$1 = ((((!((map__54001 == null)))?((((map__54001.cljs$lang$protocol_mask$partition0$ & (64))) || ((cljs.core.PROTOCOL_SENTINEL === map__54001.cljs$core$ISeq$)))?true:false):false))?cljs.core.apply.call(null,cljs.core.hash_map,map__54001):map__54001);
var title = cljs.core.get.call(null,map__54001__$1,new cljs.core.Keyword("contact","title","contact/title",-151426609));
return new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [antizer.reagent.form_item,new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"wrapper-col","wrapper-col",-1413688923),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"span","span",1394872991),(24)], null),new cljs.core.Keyword(null,"validate-status","validate-status",-612956038),((cljs.core.not.call(null,cljs.spec.alpha.valid_QMARK_.call(null,new cljs.core.Keyword("contact","title","contact/title",-151426609),title)))?new cljs.core.Keyword(null,"error","error",-978969032):null),new cljs.core.Keyword(null,"help","help",-439233446),((cljs.core.not.call(null,cljs.spec.alpha.valid_QMARK_.call(null,new cljs.core.Keyword("contact","title","contact/title",-151426609),title)))?"b\u0142\u0119dna nazwa stanowiska":null)], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [antizer.reagent.input,new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"placeholder","placeholder",-104873083),"stanowisko",new cljs.core.Keyword(null,"value","value",305978217),title,new cljs.core.Keyword(null,"on-change","on-change",-732046149),((function (map__54001,map__54001__$1,title,show_dialog_QMARK_,contact_form,valid_contact){
return (function (e){
var val = cljs.core.not_empty.call(null,e.target.value);
var contact = cljs.core.assoc.call(null,cljs.core.deref.call(null,contact_form),new cljs.core.Keyword("contact","title","contact/title",-151426609),val);
return re_frame.core.dispatch.call(null,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword("contacts","set-contact-form","contacts/set-contact-form",690565228),contact], null));
});})(map__54001,map__54001__$1,title,show_dialog_QMARK_,contact_form,valid_contact))
,new cljs.core.Keyword(null,"style","style",-496642736),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"display","display",242065432),new cljs.core.Keyword(null,"inline","inline",1399884222)], null)], null)], null)], null);
})()], null)], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [antizer.reagent.row,new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [antizer.reagent.col,new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"span","span",1394872991),(24)], null),(function (){var map__54003 = cljs.core.deref.call(null,contact_form);
var map__54003__$1 = ((((!((map__54003 == null)))?((((map__54003.cljs$lang$protocol_mask$partition0$ & (64))) || ((cljs.core.PROTOCOL_SENTINEL === map__54003.cljs$core$ISeq$)))?true:false):false))?cljs.core.apply.call(null,cljs.core.hash_map,map__54003):map__54003);
var description = cljs.core.get.call(null,map__54003__$1,new cljs.core.Keyword("contact","description","contact/description",372033920));
return new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [antizer.reagent.form_item,new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"wrapper-col","wrapper-col",-1413688923),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"span","span",1394872991),(24)], null),new cljs.core.Keyword(null,"validate-status","validate-status",-612956038),((cljs.core.not.call(null,cljs.spec.alpha.valid_QMARK_.call(null,new cljs.core.Keyword("contact","description","contact/description",372033920),description)))?new cljs.core.Keyword(null,"error","error",-978969032):null),new cljs.core.Keyword(null,"help","help",-439233446),((cljs.core.not.call(null,cljs.spec.alpha.valid_QMARK_.call(null,new cljs.core.Keyword("contact","description","contact/description",372033920),description)))?"niepoprawny komentarz":null)], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [antizer.reagent.input_text_area,new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"placeholder","placeholder",-104873083),"opis/komentarz",new cljs.core.Keyword(null,"value","value",305978217),description,new cljs.core.Keyword(null,"on-change","on-change",-732046149),((function (map__54003,map__54003__$1,description,show_dialog_QMARK_,contact_form,valid_contact){
return (function (e){
var val = cljs.core.not_empty.call(null,e.target.value);
var contact = cljs.core.assoc.call(null,cljs.core.deref.call(null,contact_form),new cljs.core.Keyword("contact","description","contact/description",372033920),val);
return re_frame.core.dispatch.call(null,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword("contacts","set-contact-form","contacts/set-contact-form",690565228),contact], null));
});})(map__54003,map__54003__$1,description,show_dialog_QMARK_,contact_form,valid_contact))
,new cljs.core.Keyword(null,"style","style",-496642736),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"display","display",242065432),new cljs.core.Keyword(null,"inline","inline",1399884222)], null)], null)], null)], null);
})()], null)], null)], null)], null);
});
;})(show_dialog_QMARK_,contact_form,valid_contact))
});
eckersdorf.contacts.ui.contacts_list = (function eckersdorf$contacts$ui$contacts_list(){
var contacts_list = re_frame.core.subscribe.call(null,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword("contacts","filtered","contacts/filtered",64153716)], null));
var window_height = re_frame.core.subscribe.call(null,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword("window","height","window/height",1310154766)], null));
return ((function (contacts_list,window_height){
return (function (){
return new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [antizer.reagent.table,new cljs.core.PersistentArrayMap(null, 5, [new cljs.core.Keyword(null,"columns","columns",1998437288),new cljs.core.PersistentVector(null, 7, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"title","title",636505583),"imi\u0119",new cljs.core.Keyword(null,"dataIndex","dataIndex",778447901),new cljs.core.Keyword("contact","first-name","contact/first-name",-365071315),new cljs.core.Keyword(null,"key","key",-1516042587),new cljs.core.Keyword("contact","first-name","contact/first-name",-365071315),new cljs.core.Keyword(null,"sorter","sorter",-2066997708),((function (contacts_list,window_height){
return (function (a,b){
return cljs.core.compare.call(null,(a["first-name"]),(b["first-name"]));
});})(contacts_list,window_height))
], null),new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"title","title",636505583),"nazwisko",new cljs.core.Keyword(null,"dataIndex","dataIndex",778447901),new cljs.core.Keyword("contact","last-name","contact/last-name",-1539952766),new cljs.core.Keyword(null,"key","key",-1516042587),new cljs.core.Keyword("contact","last-name","contact/last-name",-1539952766),new cljs.core.Keyword(null,"sorter","sorter",-2066997708),((function (contacts_list,window_height){
return (function (a,b){
return cljs.core.compare.call(null,(a["last-name"]),(b["last-name"]));
});})(contacts_list,window_height))
], null),new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"title","title",636505583),"e-mail",new cljs.core.Keyword(null,"dataIndex","dataIndex",778447901),new cljs.core.Keyword("contact","email-address","contact/email-address",-1363984584),new cljs.core.Keyword(null,"key","key",-1516042587),new cljs.core.Keyword("contact","email-address","contact/email-address",-1363984584),new cljs.core.Keyword(null,"sorter","sorter",-2066997708),((function (contacts_list,window_height){
return (function (a,b){
return cljs.core.compare.call(null,(a["email-address"]),(b["email-address"]));
});})(contacts_list,window_height))
], null),new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"title","title",636505583),"telefon",new cljs.core.Keyword(null,"dataIndex","dataIndex",778447901),new cljs.core.Keyword("contact","phone-number","contact/phone-number",-766137276),new cljs.core.Keyword(null,"key","key",-1516042587),new cljs.core.Keyword("contact","phone-number","contact/phone-number",-766137276)], null),new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"title","title",636505583),"firma",new cljs.core.Keyword(null,"dataIndex","dataIndex",778447901),new cljs.core.Keyword("contact","company","contact/company",1357719325),new cljs.core.Keyword(null,"key","key",-1516042587),new cljs.core.Keyword("contact","company","contact/company",1357719325)], null),new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"title","title",636505583),"stanowisko",new cljs.core.Keyword(null,"dataIndex","dataIndex",778447901),new cljs.core.Keyword("contact","title","contact/title",-151426609),new cljs.core.Keyword(null,"key","key",-1516042587),new cljs.core.Keyword("contact","title","contact/title",-151426609)], null),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"title","title",636505583),"akcje",new cljs.core.Keyword(null,"render","render",-1408033454),((function (contacts_list,window_height){
return (function (_,record,___$1){
var object_id = (record["object-id"]);
var contact = clojure.set.rename_keys.call(null,eckersdorf.utils.add_ns.call(null,cljs.core.dissoc.call(null,cljs.core.js__GT_clj.call(null,record,new cljs.core.Keyword(null,"keywordize-keys","keywordize-keys",1310784252),true),new cljs.core.Keyword(null,"id","id",-1388402092)),new cljs.core.Keyword(null,"contact","contact",609093372)),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword("contact","object-id","contact/object-id",440137701),new cljs.core.Keyword("mongo","object-id","mongo/object-id",-1464142663)], null));
return reagent.core.as_element.call(null,new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [antizer.reagent.button_group,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [antizer.reagent.button,new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"icon","icon",1679606541),new cljs.core.Keyword(null,"delete","delete",-1768633620),new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"danger","danger",-624338030),new cljs.core.Keyword(null,"on-click","on-click",1632826543),((function (object_id,contact,contacts_list,window_height){
return (function (){
return re_frame.core.dispatch.call(null,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword("contacts","ajax.delete-contact","contacts/ajax.delete-contact",1023851134),object_id], null));
});})(object_id,contact,contacts_list,window_height))
], null)], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [antizer.reagent.button,new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"icon","icon",1679606541),new cljs.core.Keyword(null,"edit","edit",-1641834166),new cljs.core.Keyword(null,"on-click","on-click",1632826543),((function (object_id,contact,contacts_list,window_height){
return (function (){
return re_frame.core.dispatch.call(null,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword("contacts","modify-contact-dialog","contacts/modify-contact-dialog",-1062860849),contact], null));
});})(object_id,contact,contacts_list,window_height))
], null)], null)], null));
});})(contacts_list,window_height))
], null)], null),new cljs.core.Keyword(null,"dataSource","dataSource",-178401132),cljs.core.map_indexed.call(null,((function (contacts_list,window_height){
return (function (i,m){
return cljs.core.assoc.call(null,m,new cljs.core.Keyword(null,"id","id",-1388402092),i);
});})(contacts_list,window_height))
,cljs.core.deref.call(null,contacts_list)),new cljs.core.Keyword(null,"row-key","row-key",-1189010712),"id",new cljs.core.Keyword(null,"pagination","pagination",-1553654604),false,new cljs.core.Keyword(null,"scroll","scroll",971553779),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"y","y",-1757859776),"calc(100vh - 104px - 28px - 50px"], null)], null)], null);
});
;})(contacts_list,window_height))
});
eckersdorf.contacts.ui.search_bar = (function eckersdorf$contacts$ui$search_bar(){
var search_form = re_frame.core.subscribe.call(null,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword("contacts","temp-search-form","contacts/temp-search-form",-476585488)], null));
return new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [eckersdorf.flex.hbox,new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [eckersdorf.flex.box,new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"size","size",1098693007),(1),new cljs.core.Keyword(null,"justify-content","justify-content",-1990475787),new cljs.core.Keyword(null,"center","center",-748944368)], null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [antizer.reagent.form_item,new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"style","style",-496642736),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"width","width",-384071477),"40%"], null)], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [antizer.reagent.input,new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"placeholder","placeholder",-104873083),"wpisz imi\u0119, nazwisko, telefon, firm\u0119 albo funkcj\u0119 by wyszuka\u0107",new cljs.core.Keyword(null,"value","value",305978217),cljs.core.deref.call(null,search_form),new cljs.core.Keyword(null,"on-change","on-change",-732046149),((function (search_form){
return (function (e){
var val = cljs.core.not_empty.call(null,e.target.value);
return re_frame.core.dispatch.call(null,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword("contacts","debounce-search","contacts/debounce-search",279243449),val], null));
});})(search_form))
,new cljs.core.Keyword(null,"style","style",-496642736),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"width","width",-384071477),"100%"], null)], null)], null)], null)], null)], null);
});
eckersdorf.contacts.ui.contacts_view = (function eckersdorf$contacts$ui$contacts_view(){
return (function (){
return new cljs.core.PersistentVector(null, 5, 5, cljs.core.PersistentVector.EMPTY_NODE, [eckersdorf.flex.vbox,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [eckersdorf.contacts.ui.contact_dialog], null),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [eckersdorf.contacts.ui.search_bar], null),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [eckersdorf.contacts.ui.contacts_list], null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [eckersdorf.flex.hbox,new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"justify-content","justify-content",-1990475787),new cljs.core.Keyword(null,"center","center",-748944368)], null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [antizer.reagent.button,new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"primary","primary",817773892),new cljs.core.Keyword(null,"on-click","on-click",1632826543),(function (){
return re_frame.core.dispatch.call(null,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword("contacts","create-contact-dialog","contacts/create-contact-dialog",373120771)], null));
})], null),"dodaj"], null)], null)], null);
});
});

//# sourceMappingURL=ui.js.map?rel=1510703896229
