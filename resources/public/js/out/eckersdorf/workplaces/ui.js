// Compiled by ClojureScript 1.9.946 {}
goog.provide('eckersdorf.workplaces.ui');
goog.require('cljs.core');
goog.require('cljs.spec.alpha');
goog.require('reagent.core');
goog.require('reagent.ratom');
goog.require('re_frame.core');
goog.require('antizer.reagent');
goog.require('cuerdas.core');
goog.require('eckersdorf.flex');
goog.require('eckersdorf.utils');
goog.require('clojure.set');
eckersdorf.workplaces.ui.workplace_dialog = (function eckersdorf$workplaces$ui$workplace_dialog(modify_QMARK_){
var show_dialog_QMARK_ = re_frame.core.subscribe.call(null,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword("workplaces","show-dialog?","workplaces/show-dialog?",1298196099)], null));
var workplace_form = re_frame.core.subscribe.call(null,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword("workplaces","workplace-form","workplaces/workplace-form",2000080237)], null));
var email_addon = reagent.ratom.make_reaction.call(null,((function (show_dialog_QMARK_,workplace_form){
return (function (){
return ["@",cljs.core.str.cljs$core$IFn$_invoke$arity$1((function (){var or__30523__auto__ = cljs.core.second.call(null,cuerdas.core.split.call(null,new cljs.core.Keyword("workplace","email-address","workplace/email-address",-2014908542).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,workplace_form)),"@"));
if(cljs.core.truth_(or__30523__auto__)){
return or__30523__auto__;
} else {
return "teas.com.pl";
}
})())].join('');
});})(show_dialog_QMARK_,workplace_form))
);
var valid_workplace = reagent.core.atom.call(null,null);
return ((function (show_dialog_QMARK_,workplace_form,email_addon,valid_workplace){
return (function (){
return new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [antizer.reagent.modal,new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"visible","visible",-1024216805),!((cljs.core.deref.call(null,show_dialog_QMARK_) == null)),new cljs.core.Keyword(null,"title","title",636505583),(cljs.core.truth_(new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"modify","modify",-1261040869),null], null), null).call(null,cljs.core.deref.call(null,show_dialog_QMARK_)))?"edytuj sklep":"dodaj sklep"),new cljs.core.Keyword(null,"footer","footer",1606445390),reagent.core.as_element.call(null,new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div","div",1057191632),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [antizer.reagent.button,new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"on-click","on-click",1632826543),((function (show_dialog_QMARK_,workplace_form,email_addon,valid_workplace){
return (function (){
return re_frame.core.dispatch.call(null,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword("workplaces","hide-dialog","workplaces/hide-dialog",34869870)], null));
});})(show_dialog_QMARK_,workplace_form,email_addon,valid_workplace))
], null),"anuluj"], null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [antizer.reagent.button,new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"type","type",1174270348),(cljs.core.truth_(cljs.spec.alpha.valid_QMARK_.call(null,new cljs.core.Keyword("workplace","workplace","workplace/workplace",454001591),cljs.core.deref.call(null,workplace_form)))?new cljs.core.Keyword(null,"primary","primary",817773892):new cljs.core.Keyword(null,"danger","danger",-624338030)),new cljs.core.Keyword(null,"on-click","on-click",1632826543),((function (show_dialog_QMARK_,workplace_form,email_addon,valid_workplace){
return (function (){
if(cljs.core.truth_(cljs.spec.alpha.valid_QMARK_.call(null,new cljs.core.Keyword("workplace","workplace","workplace/workplace",454001591),cljs.core.deref.call(null,workplace_form)))){
if(cljs.core.truth_(new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"modify","modify",-1261040869),null], null), null).call(null,cljs.core.deref.call(null,show_dialog_QMARK_)))){
return re_frame.core.dispatch.call(null,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword("workplaces","request-update","workplaces/request-update",1547171640)], null));
} else {
return re_frame.core.dispatch.call(null,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword("workplaces","request-create","workplaces/request-create",-939879574)], null));
}
} else {
return antizer.reagent.message_warning.call(null,"wprowadzono b\u0142\u0119dne dane");
}
});})(show_dialog_QMARK_,workplace_form,email_addon,valid_workplace))
], null),(cljs.core.truth_(new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"modify","modify",-1261040869),null], null), null).call(null,cljs.core.deref.call(null,show_dialog_QMARK_)))?"modyfikuj":"dodaj")], null)], null))], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [eckersdorf.flex.vbox,new cljs.core.PersistentVector(null, 5, 5, cljs.core.PersistentVector.EMPTY_NODE, [antizer.reagent.form,new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"layout","layout",-2120940921),new cljs.core.Keyword(null,"horizontal","horizontal",2062109475)], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [antizer.reagent.form_item,new cljs.core.PersistentVector(null, 6, 5, cljs.core.PersistentVector.EMPTY_NODE, [eckersdorf.flex.hbox,new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [eckersdorf.flex.box,new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"size","size",1098693007),(2),new cljs.core.Keyword(null,"style","style",-496642736),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"display","display",242065432),new cljs.core.Keyword(null,"block","block",664686210),new cljs.core.Keyword(null,"min-height","min-height",398480837),"32px"], null)], null),(function (){var map__44407 = cljs.core.deref.call(null,workplace_form);
var map__44407__$1 = ((((!((map__44407 == null)))?((((map__44407.cljs$lang$protocol_mask$partition0$ & (64))) || ((cljs.core.PROTOCOL_SENTINEL === map__44407.cljs$core$ISeq$)))?true:false):false))?cljs.core.apply.call(null,cljs.core.hash_map,map__44407):map__44407);
var name = cljs.core.get.call(null,map__44407__$1,new cljs.core.Keyword("workplace","name","workplace/name",-1414028077));
return new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [antizer.reagent.form_item,new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"validate-status","validate-status",-612956038),(((!((name == null))) && (cljs.core.not.call(null,cljs.spec.alpha.valid_QMARK_.call(null,new cljs.core.Keyword("workplace","name","workplace/name",-1414028077),name))))?new cljs.core.Keyword(null,"error","error",-978969032):null),new cljs.core.Keyword(null,"help","help",-439233446),(((!((name == null))) && (cljs.core.not.call(null,cljs.spec.alpha.valid_QMARK_.call(null,new cljs.core.Keyword("workplace","name","workplace/name",-1414028077),name))))?"pole nie mo\u017Ce by\u0107 puste":null)], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [antizer.reagent.input,new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"placeholder","placeholder",-104873083),"nazwa",new cljs.core.Keyword(null,"value","value",305978217),name,new cljs.core.Keyword(null,"on-change","on-change",-732046149),((function (map__44407,map__44407__$1,name,show_dialog_QMARK_,workplace_form,email_addon,valid_workplace){
return (function (e){
var val = e.target.value;
var workplace = cljs.core.assoc.call(null,cljs.core.deref.call(null,workplace_form),new cljs.core.Keyword("workplace","name","workplace/name",-1414028077),val);
return re_frame.core.dispatch.call(null,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword("workplaces","set-workplace-form","workplaces/set-workplace-form",2062868738),workplace], null));
});})(map__44407,map__44407__$1,name,show_dialog_QMARK_,workplace_form,email_addon,valid_workplace))
], null)], null)], null);
})()], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [eckersdorf.flex.gap,new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"size","size",1098693007),"12px"], null)], null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [eckersdorf.flex.box,new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"size","size",1098693007),(2),new cljs.core.Keyword(null,"style","style",-496642736),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"display","display",242065432),new cljs.core.Keyword(null,"block","block",664686210),new cljs.core.Keyword(null,"min-height","min-height",398480837),"32px"], null)], null),(function (){var map__44409 = cljs.core.deref.call(null,workplace_form);
var map__44409__$1 = ((((!((map__44409 == null)))?((((map__44409.cljs$lang$protocol_mask$partition0$ & (64))) || ((cljs.core.PROTOCOL_SENTINEL === map__44409.cljs$core$ISeq$)))?true:false):false))?cljs.core.apply.call(null,cljs.core.hash_map,map__44409):map__44409);
var email_address = cljs.core.get.call(null,map__44409__$1,new cljs.core.Keyword("workplace","email-address","workplace/email-address",-2014908542));
var email_address__$1 = cljs.core.first.call(null,cuerdas.core.split.call(null,email_address,"@"));
return new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [antizer.reagent.form_item,new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"validate-status","validate-status",-612956038),(((!((email_address__$1 == null))) && (cljs.core.not.call(null,cljs.spec.alpha.valid_QMARK_.call(null,new cljs.core.Keyword("workplace","email-address","workplace/email-address",-2014908542),[cljs.core.str.cljs$core$IFn$_invoke$arity$1(email_address__$1),cljs.core.str.cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,email_addon))].join('')))))?new cljs.core.Keyword(null,"error","error",-978969032):null),new cljs.core.Keyword(null,"help","help",-439233446),(cljs.core.truth_(cuerdas.core.empty_QMARK_.call(null,email_address__$1))?"pole nie mo\u017Ce by\u0107 puste":(((!((email_address__$1 == null))) && (cljs.core.not.call(null,cljs.spec.alpha.valid_QMARK_.call(null,new cljs.core.Keyword("workplace","email-address","workplace/email-address",-2014908542),[cljs.core.str.cljs$core$IFn$_invoke$arity$1(email_address__$1),cljs.core.str.cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,email_addon))].join('')))))?"b\u0142\u0119dny adres email":null))], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [antizer.reagent.input,new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"placeholder","placeholder",-104873083),"e-mail",new cljs.core.Keyword(null,"value","value",305978217),email_address__$1,new cljs.core.Keyword(null,"addon-after","addon-after",634985306),cljs.core.deref.call(null,email_addon),new cljs.core.Keyword(null,"on-change","on-change",-732046149),((function (map__44409,map__44409__$1,email_address,email_address__$1,show_dialog_QMARK_,workplace_form,email_addon,valid_workplace){
return (function (e){
var val = e.target.value;
var workplace = cljs.core.assoc.call(null,cljs.core.deref.call(null,workplace_form),new cljs.core.Keyword("workplace","email-address","workplace/email-address",-2014908542),((cljs.core.not.call(null,cuerdas.core.empty_or_nil_QMARK_.call(null,val)))?[cljs.core.str.cljs$core$IFn$_invoke$arity$1(val),cljs.core.str.cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,email_addon))].join(''):""));
return re_frame.core.dispatch.call(null,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword("workplaces","set-workplace-form","workplaces/set-workplace-form",2062868738),workplace], null));
});})(map__44409,map__44409__$1,email_address,email_address__$1,show_dialog_QMARK_,workplace_form,email_addon,valid_workplace))
], null)], null)], null);
})()], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [eckersdorf.flex.gap,new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"size","size",1098693007),"12px"], null)], null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [eckersdorf.flex.box,new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"size","size",1098693007),(1),new cljs.core.Keyword(null,"style","style",-496642736),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"display","display",242065432),new cljs.core.Keyword(null,"block","block",664686210),new cljs.core.Keyword(null,"min-height","min-height",398480837),"32px"], null)], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [antizer.reagent.form_item,new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [antizer.reagent.select,new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"value","value",305978217),(function (){var or__30523__auto__ = new cljs.core.Keyword("workplace","type","workplace/type",-9855694).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,workplace_form));
if(cljs.core.truth_(or__30523__auto__)){
return or__30523__auto__;
} else {
return "dc";
}
})(),new cljs.core.Keyword(null,"on-change","on-change",-732046149),((function (show_dialog_QMARK_,workplace_form,email_addon,valid_workplace){
return (function (val){
var workplace = cljs.core.assoc.call(null,cljs.core.deref.call(null,workplace_form),new cljs.core.Keyword("workplace","type","workplace/type",-9855694),val);
return re_frame.core.dispatch.call(null,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword("workplaces","set-workplace-form","workplaces/set-workplace-form",2062868738),workplace], null));
});})(show_dialog_QMARK_,workplace_form,email_addon,valid_workplace))
], null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [antizer.reagent.select_option,new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"value","value",305978217),"dc"], null),"delikatesy"], null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [antizer.reagent.select_option,new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"value","value",305978217),"shop"], null),"niezrzeszony"], null)], null)], null)], null)], null)], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [antizer.reagent.form_item,new cljs.core.PersistentVector(null, 6, 5, cljs.core.PersistentVector.EMPTY_NODE, [eckersdorf.flex.hbox,new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [eckersdorf.flex.box,new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"size","size",1098693007),(3),new cljs.core.Keyword(null,"style","style",-496642736),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"display","display",242065432),new cljs.core.Keyword(null,"block","block",664686210),new cljs.core.Keyword(null,"min-height","min-height",398480837),"32px"], null)], null),(function (){var map__44411 = cljs.core.deref.call(null,workplace_form);
var map__44411__$1 = ((((!((map__44411 == null)))?((((map__44411.cljs$lang$protocol_mask$partition0$ & (64))) || ((cljs.core.PROTOCOL_SENTINEL === map__44411.cljs$core$ISeq$)))?true:false):false))?cljs.core.apply.call(null,cljs.core.hash_map,map__44411):map__44411);
var map__44412 = cljs.core.get.call(null,map__44411__$1,new cljs.core.Keyword("workplace","address","workplace/address",-479372496));
var map__44412__$1 = ((((!((map__44412 == null)))?((((map__44412.cljs$lang$protocol_mask$partition0$ & (64))) || ((cljs.core.PROTOCOL_SENTINEL === map__44412.cljs$core$ISeq$)))?true:false):false))?cljs.core.apply.call(null,cljs.core.hash_map,map__44412):map__44412);
var street_name = cljs.core.get.call(null,map__44412__$1,new cljs.core.Keyword("address","street-name","address/street-name",2138263693));
return new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [antizer.reagent.form_item,new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"validate-status","validate-status",-612956038),(((!((street_name == null))) && (cljs.core.not.call(null,cljs.spec.alpha.valid_QMARK_.call(null,new cljs.core.Keyword("address","street-name","address/street-name",2138263693),street_name))))?new cljs.core.Keyword(null,"error","error",-978969032):null),new cljs.core.Keyword(null,"help","help",-439233446),(cljs.core.truth_(cuerdas.core.empty_QMARK_.call(null,street_name))?"pole nie mo\u017Ce by\u0107 puste":(((!((street_name == null))) && (cljs.core.not.call(null,cljs.spec.alpha.valid_QMARK_.call(null,new cljs.core.Keyword("address","street-name","address/street-name",2138263693),street_name))))?"b\u0142\u0119dna nazwa ulicy":null))], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [antizer.reagent.input,new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"placeholder","placeholder",-104873083),"ulica",new cljs.core.Keyword(null,"value","value",305978217),street_name,new cljs.core.Keyword(null,"on-change","on-change",-732046149),((function (map__44411,map__44411__$1,map__44412,map__44412__$1,street_name,show_dialog_QMARK_,workplace_form,email_addon,valid_workplace){
return (function (e){
var val = e.target.value;
var workplace = cljs.core.assoc_in.call(null,cljs.core.deref.call(null,workplace_form),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword("workplace","address","workplace/address",-479372496),new cljs.core.Keyword("address","street-name","address/street-name",2138263693)], null),val);
return re_frame.core.dispatch.call(null,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword("workplaces","set-workplace-form","workplaces/set-workplace-form",2062868738),workplace], null));
});})(map__44411,map__44411__$1,map__44412,map__44412__$1,street_name,show_dialog_QMARK_,workplace_form,email_addon,valid_workplace))
], null)], null)], null);
})()], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [eckersdorf.flex.gap,new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"size","size",1098693007),"12px"], null)], null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [eckersdorf.flex.box,new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"size","size",1098693007),(1),new cljs.core.Keyword(null,"style","style",-496642736),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"display","display",242065432),new cljs.core.Keyword(null,"block","block",664686210),new cljs.core.Keyword(null,"min-height","min-height",398480837),"32px"], null)], null),(function (){var map__44415 = cljs.core.deref.call(null,workplace_form);
var map__44415__$1 = ((((!((map__44415 == null)))?((((map__44415.cljs$lang$protocol_mask$partition0$ & (64))) || ((cljs.core.PROTOCOL_SENTINEL === map__44415.cljs$core$ISeq$)))?true:false):false))?cljs.core.apply.call(null,cljs.core.hash_map,map__44415):map__44415);
var map__44416 = cljs.core.get.call(null,map__44415__$1,new cljs.core.Keyword("workplace","address","workplace/address",-479372496));
var map__44416__$1 = ((((!((map__44416 == null)))?((((map__44416.cljs$lang$protocol_mask$partition0$ & (64))) || ((cljs.core.PROTOCOL_SENTINEL === map__44416.cljs$core$ISeq$)))?true:false):false))?cljs.core.apply.call(null,cljs.core.hash_map,map__44416):map__44416);
var street_number = cljs.core.get.call(null,map__44416__$1,new cljs.core.Keyword("address","street-number","address/street-number",-280098867));
return new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [antizer.reagent.form_item,new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"validate-status","validate-status",-612956038),(((!((street_number == null))) && (cljs.core.not.call(null,cljs.spec.alpha.valid_QMARK_.call(null,new cljs.core.Keyword("address","street-number","address/street-number",-280098867),street_number))))?new cljs.core.Keyword(null,"error","error",-978969032):null),new cljs.core.Keyword(null,"help","help",-439233446),(cljs.core.truth_(cuerdas.core.empty_QMARK_.call(null,street_number))?"pole nie mo\u017Ce by\u0107 puste":(((!((street_number == null))) && (cljs.core.not.call(null,cljs.spec.alpha.valid_QMARK_.call(null,new cljs.core.Keyword("address","street-number","address/street-number",-280098867),street_number))))?"b\u0142\u0119dny numer ulicy":null))], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [antizer.reagent.input,new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"placeholder","placeholder",-104873083),"numer ulicy",new cljs.core.Keyword(null,"value","value",305978217),street_number,new cljs.core.Keyword(null,"on-change","on-change",-732046149),((function (map__44415,map__44415__$1,map__44416,map__44416__$1,street_number,show_dialog_QMARK_,workplace_form,email_addon,valid_workplace){
return (function (e){
var val = e.target.value;
var workplace = cljs.core.assoc_in.call(null,cljs.core.deref.call(null,workplace_form),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword("workplace","address","workplace/address",-479372496),new cljs.core.Keyword("address","street-number","address/street-number",-280098867)], null),val);
return re_frame.core.dispatch.call(null,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword("workplaces","set-workplace-form","workplaces/set-workplace-form",2062868738),workplace], null));
});})(map__44415,map__44415__$1,map__44416,map__44416__$1,street_number,show_dialog_QMARK_,workplace_form,email_addon,valid_workplace))
], null)], null)], null);
})()], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [eckersdorf.flex.gap,new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"size","size",1098693007),"12px"], null)], null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [eckersdorf.flex.box,new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"size","size",1098693007),(1),new cljs.core.Keyword(null,"style","style",-496642736),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"display","display",242065432),new cljs.core.Keyword(null,"block","block",664686210),new cljs.core.Keyword(null,"min-height","min-height",398480837),"32px"], null)], null),(function (){var map__44419 = cljs.core.deref.call(null,workplace_form);
var map__44419__$1 = ((((!((map__44419 == null)))?((((map__44419.cljs$lang$protocol_mask$partition0$ & (64))) || ((cljs.core.PROTOCOL_SENTINEL === map__44419.cljs$core$ISeq$)))?true:false):false))?cljs.core.apply.call(null,cljs.core.hash_map,map__44419):map__44419);
var map__44420 = cljs.core.get.call(null,map__44419__$1,new cljs.core.Keyword("workplace","address","workplace/address",-479372496));
var map__44420__$1 = ((((!((map__44420 == null)))?((((map__44420.cljs$lang$protocol_mask$partition0$ & (64))) || ((cljs.core.PROTOCOL_SENTINEL === map__44420.cljs$core$ISeq$)))?true:false):false))?cljs.core.apply.call(null,cljs.core.hash_map,map__44420):map__44420);
var house_number = cljs.core.get.call(null,map__44420__$1,new cljs.core.Keyword("address","house-number","address/house-number",1162238039));
return new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [antizer.reagent.form_item,new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"validate-status","validate-status",-612956038),(((!((house_number == null))) && (cljs.core.not.call(null,cljs.spec.alpha.valid_QMARK_.call(null,new cljs.core.Keyword("address","house-number","address/house-number",1162238039),house_number))))?new cljs.core.Keyword(null,"error","error",-978969032):null),new cljs.core.Keyword(null,"help","help",-439233446),(((!((house_number == null))) && (cljs.core.not.call(null,cljs.spec.alpha.valid_QMARK_.call(null,new cljs.core.Keyword("address","house-number","address/house-number",1162238039),house_number))))?"b\u0142\u0119dny numer budynku":null)], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [antizer.reagent.input,new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"placeholder","placeholder",-104873083),"budynku",new cljs.core.Keyword(null,"value","value",305978217),house_number,new cljs.core.Keyword(null,"on-change","on-change",-732046149),((function (map__44419,map__44419__$1,map__44420,map__44420__$1,house_number,show_dialog_QMARK_,workplace_form,email_addon,valid_workplace){
return (function (e){
var val = e.target.value;
var workplace = cljs.core.assoc_in.call(null,cljs.core.deref.call(null,workplace_form),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword("workplace","address","workplace/address",-479372496),new cljs.core.Keyword("address","house-number","address/house-number",1162238039)], null),val);
return re_frame.core.dispatch.call(null,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword("workplaces","set-workplace-form","workplaces/set-workplace-form",2062868738),workplace], null));
});})(map__44419,map__44419__$1,map__44420,map__44420__$1,house_number,show_dialog_QMARK_,workplace_form,email_addon,valid_workplace))
], null)], null)], null);
})()], null)], null)], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [antizer.reagent.form_item,new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [eckersdorf.flex.hbox,new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [eckersdorf.flex.box,new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"size","size",1098693007),(1),new cljs.core.Keyword(null,"style","style",-496642736),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"display","display",242065432),new cljs.core.Keyword(null,"block","block",664686210),new cljs.core.Keyword(null,"min-height","min-height",398480837),"32px"], null)], null),(function (){var map__44423 = cljs.core.deref.call(null,workplace_form);
var map__44423__$1 = ((((!((map__44423 == null)))?((((map__44423.cljs$lang$protocol_mask$partition0$ & (64))) || ((cljs.core.PROTOCOL_SENTINEL === map__44423.cljs$core$ISeq$)))?true:false):false))?cljs.core.apply.call(null,cljs.core.hash_map,map__44423):map__44423);
var map__44424 = cljs.core.get.call(null,map__44423__$1,new cljs.core.Keyword("workplace","address","workplace/address",-479372496));
var map__44424__$1 = ((((!((map__44424 == null)))?((((map__44424.cljs$lang$protocol_mask$partition0$ & (64))) || ((cljs.core.PROTOCOL_SENTINEL === map__44424.cljs$core$ISeq$)))?true:false):false))?cljs.core.apply.call(null,cljs.core.hash_map,map__44424):map__44424);
var zip_code = cljs.core.get.call(null,map__44424__$1,new cljs.core.Keyword("address","zip-code","address/zip-code",147739068));
return new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [antizer.reagent.form_item,new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"validate-status","validate-status",-612956038),(((!((zip_code == null))) && (cljs.core.not.call(null,cljs.spec.alpha.valid_QMARK_.call(null,new cljs.core.Keyword("address","zip-code","address/zip-code",147739068),zip_code))))?new cljs.core.Keyword(null,"error","error",-978969032):null),new cljs.core.Keyword(null,"help","help",-439233446),(cljs.core.truth_(cuerdas.core.empty_QMARK_.call(null,zip_code))?"pole nie mo\u017Ce by\u0107 puste":(((!((zip_code == null))) && (cljs.core.not.call(null,cljs.spec.alpha.valid_QMARK_.call(null,new cljs.core.Keyword("address","zip-code","address/zip-code",147739068),zip_code))))?"b\u0142\u0119dny kod pocztowy":null))], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [antizer.reagent.input,new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"placeholder","placeholder",-104873083),"kod pocztowy",new cljs.core.Keyword(null,"value","value",305978217),zip_code,new cljs.core.Keyword(null,"on-change","on-change",-732046149),((function (map__44423,map__44423__$1,map__44424,map__44424__$1,zip_code,show_dialog_QMARK_,workplace_form,email_addon,valid_workplace){
return (function (e){
var val = e.target.value;
var workplace = cljs.core.assoc_in.call(null,cljs.core.deref.call(null,workplace_form),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword("workplace","address","workplace/address",-479372496),new cljs.core.Keyword("address","zip-code","address/zip-code",147739068)], null),val);
return re_frame.core.dispatch.call(null,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword("workplaces","set-workplace-form","workplaces/set-workplace-form",2062868738),workplace], null));
});})(map__44423,map__44423__$1,map__44424,map__44424__$1,zip_code,show_dialog_QMARK_,workplace_form,email_addon,valid_workplace))
], null)], null)], null);
})()], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [eckersdorf.flex.gap,new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"size","size",1098693007),"12px"], null)], null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [eckersdorf.flex.box,new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"size","size",1098693007),(3),new cljs.core.Keyword(null,"style","style",-496642736),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"display","display",242065432),new cljs.core.Keyword(null,"block","block",664686210),new cljs.core.Keyword(null,"min-height","min-height",398480837),"32px"], null)], null),(function (){var map__44427 = cljs.core.deref.call(null,workplace_form);
var map__44427__$1 = ((((!((map__44427 == null)))?((((map__44427.cljs$lang$protocol_mask$partition0$ & (64))) || ((cljs.core.PROTOCOL_SENTINEL === map__44427.cljs$core$ISeq$)))?true:false):false))?cljs.core.apply.call(null,cljs.core.hash_map,map__44427):map__44427);
var map__44428 = cljs.core.get.call(null,map__44427__$1,new cljs.core.Keyword("workplace","address","workplace/address",-479372496));
var map__44428__$1 = ((((!((map__44428 == null)))?((((map__44428.cljs$lang$protocol_mask$partition0$ & (64))) || ((cljs.core.PROTOCOL_SENTINEL === map__44428.cljs$core$ISeq$)))?true:false):false))?cljs.core.apply.call(null,cljs.core.hash_map,map__44428):map__44428);
var city = cljs.core.get.call(null,map__44428__$1,new cljs.core.Keyword("address","city","address/city",-1506334306));
return new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [antizer.reagent.form_item,new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"validate-status","validate-status",-612956038),(((!((city == null))) && (cljs.core.not.call(null,cljs.spec.alpha.valid_QMARK_.call(null,new cljs.core.Keyword("address","city","address/city",-1506334306),city))))?new cljs.core.Keyword(null,"error","error",-978969032):null),new cljs.core.Keyword(null,"help","help",-439233446),(cljs.core.truth_(cuerdas.core.empty_QMARK_.call(null,city))?"pole nie mo\u017Ce by\u0107 puste":(((!((city == null))) && (cljs.core.not.call(null,cljs.spec.alpha.valid_QMARK_.call(null,new cljs.core.Keyword("address","city","address/city",-1506334306),city))))?"b\u0142\u0119dna nazwa miejscowo\u015Bci":null))], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [antizer.reagent.input,new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"placeholder","placeholder",-104873083),"miejscowo\u015B\u0107",new cljs.core.Keyword(null,"value","value",305978217),city,new cljs.core.Keyword(null,"on-change","on-change",-732046149),((function (map__44427,map__44427__$1,map__44428,map__44428__$1,city,show_dialog_QMARK_,workplace_form,email_addon,valid_workplace){
return (function (e){
var val = e.target.value;
var workplace = cljs.core.assoc_in.call(null,cljs.core.deref.call(null,workplace_form),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword("workplace","address","workplace/address",-479372496),new cljs.core.Keyword("address","city","address/city",-1506334306)], null),val);
return re_frame.core.dispatch.call(null,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword("workplaces","set-workplace-form","workplaces/set-workplace-form",2062868738),workplace], null));
});})(map__44427,map__44427__$1,map__44428,map__44428__$1,city,show_dialog_QMARK_,workplace_form,email_addon,valid_workplace))
], null)], null)], null);
})()], null)], null)], null)], null)], null)], null);
});
;})(show_dialog_QMARK_,workplace_form,email_addon,valid_workplace))
});
eckersdorf.workplaces.ui.workplaces_list = (function eckersdorf$workplaces$ui$workplaces_list(){
var workplaces_list = re_frame.core.subscribe.call(null,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword("workplaces","list","workplaces/list",852308376)], null));
return ((function (workplaces_list){
return (function (){
return new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [antizer.reagent.table,new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"columns","columns",1998437288),new cljs.core.PersistentVector(null, 9, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"title","title",636505583),"nazwa",new cljs.core.Keyword(null,"dataIndex","dataIndex",778447901),new cljs.core.Keyword("workplace","name","workplace/name",-1414028077),new cljs.core.Keyword(null,"key","key",-1516042587),new cljs.core.Keyword("workplace","name","workplace/name",-1414028077)], null),new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"title","title",636505583),"typ",new cljs.core.Keyword(null,"dataIndex","dataIndex",778447901),new cljs.core.Keyword("workplace","type","workplace/type",-9855694),new cljs.core.Keyword(null,"key","key",-1516042587),new cljs.core.Keyword("workplace","type","workplace/type",-9855694)], null),new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"title","title",636505583),"e-mail",new cljs.core.Keyword(null,"dataIndex","dataIndex",778447901),new cljs.core.Keyword("workplace","email-address","workplace/email-address",-2014908542),new cljs.core.Keyword(null,"key","key",-1516042587),new cljs.core.Keyword("workplace","email-address","workplace/email-address",-2014908542)], null),new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"title","title",636505583),"ulica",new cljs.core.Keyword(null,"dataIndex","dataIndex",778447901),"address.street-name",new cljs.core.Keyword(null,"key","key",-1516042587),"address.street-name"], null),new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"title","title",636505583),"numer ulicy",new cljs.core.Keyword(null,"dataIndex","dataIndex",778447901),"address.street-number",new cljs.core.Keyword(null,"key","key",-1516042587),"address.street-number"], null),new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"title","title",636505583),"numer budynku",new cljs.core.Keyword(null,"dataIndex","dataIndex",778447901),"address.house-number",new cljs.core.Keyword(null,"key","key",-1516042587),"address.house-number",new cljs.core.Keyword(null,"render","render",-1408033454),((function (workplaces_list){
return (function (p1__44431_SHARP_){
var or__30523__auto__ = p1__44431_SHARP_;
if(cljs.core.truth_(or__30523__auto__)){
return or__30523__auto__;
} else {
return "brak";
}
});})(workplaces_list))
], null),new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"title","title",636505583),"kod pocztowy",new cljs.core.Keyword(null,"dataIndex","dataIndex",778447901),"address.zip-code",new cljs.core.Keyword(null,"key","key",-1516042587),"address.zip-code"], null),new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"title","title",636505583),"miejscowo\u015B\u0107",new cljs.core.Keyword(null,"dataIndex","dataIndex",778447901),"address.city",new cljs.core.Keyword(null,"key","key",-1516042587),"address.city"], null),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"title","title",636505583),"akcje",new cljs.core.Keyword(null,"render","render",-1408033454),((function (workplaces_list){
return (function (_,record,___$1){
var object_id = (record["object-id"]);
var workplace = cljs.core.update.call(null,clojure.set.rename_keys.call(null,eckersdorf.utils.add_ns.call(null,cljs.core.dissoc.call(null,cljs.core.js__GT_clj.call(null,record,new cljs.core.Keyword(null,"keywordize-keys","keywordize-keys",1310784252),true),new cljs.core.Keyword(null,"id","id",-1388402092)),new cljs.core.Keyword(null,"workplace","workplace",-651436259)),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword("workplace","object-id","workplace/object-id",353577307),new cljs.core.Keyword("mongo","object-id","mongo/object-id",-1464142663)], null)),new cljs.core.Keyword("workplace","address","workplace/address",-479372496),eckersdorf.utils.add_ns,new cljs.core.Keyword(null,"address","address",559499426));
return reagent.core.as_element.call(null,new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [antizer.reagent.button_group,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [antizer.reagent.button,new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"icon","icon",1679606541),new cljs.core.Keyword(null,"delete","delete",-1768633620),new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"danger","danger",-624338030),new cljs.core.Keyword(null,"on-click","on-click",1632826543),((function (object_id,workplace,workplaces_list){
return (function (){
return re_frame.core.dispatch.call(null,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword("workplaces","request-delete","workplaces/request-delete",1562757236),object_id], null));
});})(object_id,workplace,workplaces_list))
], null)], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [antizer.reagent.button,new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"icon","icon",1679606541),new cljs.core.Keyword(null,"edit","edit",-1641834166),new cljs.core.Keyword(null,"on-click","on-click",1632826543),((function (object_id,workplace,workplaces_list){
return (function (){
return re_frame.core.dispatch.call(null,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword("workplaces","modify-workplace-dialog","workplaces/modify-workplace-dialog",1910824027),workplace], null));
});})(object_id,workplace,workplaces_list))
], null)], null)], null));
});})(workplaces_list))
], null)], null),new cljs.core.Keyword(null,"dataSource","dataSource",-178401132),cljs.core.map_indexed.call(null,((function (workplaces_list){
return (function (i,m){
return cljs.core.assoc.call(null,m,new cljs.core.Keyword(null,"id","id",-1388402092),i);
});})(workplaces_list))
,cljs.core.deref.call(null,workplaces_list)),new cljs.core.Keyword(null,"row-key","row-key",-1189010712),"id",new cljs.core.Keyword(null,"pagination","pagination",-1553654604),false], null)], null);
});
;})(workplaces_list))
});
eckersdorf.workplaces.ui.workplaces_view = (function eckersdorf$workplaces$ui$workplaces_view(){
return (function (){
return new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [eckersdorf.flex.vbox,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [eckersdorf.workplaces.ui.workplace_dialog], null),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [eckersdorf.workplaces.ui.workplaces_list], null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [eckersdorf.flex.hbox,new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"justify-content","justify-content",-1990475787),new cljs.core.Keyword(null,"center","center",-748944368)], null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [antizer.reagent.button,new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"primary","primary",817773892),new cljs.core.Keyword(null,"on-click","on-click",1632826543),(function (){
return re_frame.core.dispatch.call(null,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword("workplaces","create-workplace-dialog","workplaces/create-workplace-dialog",758786805)], null));
})], null),"dodaj"], null)], null)], null);
});
});

//# sourceMappingURL=ui.js.map?rel=1510609299562
